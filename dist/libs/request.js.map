{"version":3,"sources":["libs/request.js"],"names":["Promise","require","request","method","url","data","resolve","reject","wx","header","success","res","statusCode","errMsg","fail","err","GET","POST","PUT","DELETE"],"mappings":";;;;;AAAA,IAAMA,UAAUC,QAAQ,mBAAR,CAAhB;;AAEA,SAASC,OAAT,GAAkC;AAAA,MAAhBC,MAAgB,uEAAP,KAAO;;AAChC,SAAO,UAAUC,GAAV,EAA0B;AAAA,QAAXC,IAAW,uEAAJ,EAAI;;AAC/B,WAAO,IAAIL,OAAJ,CAAY,UAAUM,OAAV,EAAmBC,MAAnB,EAA2B;AAC5CC,SAAGN,OAAH,CAAW;AACTE,gBADS;AAETC,kBAFS;AAGTF,sBAHS;AAITM,gBAAQ;AACN,0BAAgB;AADV,SAJC;AAOTC,iBAAS,iBAAUC,GAAV,EAAe;AACtB,cAAIC,aAAaD,IAAIC,UAArB;AACA,cAAIC,SAASF,IAAIE,MAAjB;AACA,cAAIR,OAAOM,IAAIN,IAAf;AACA,cAAIO,cAAc,GAAlB,EAAuB;AACrB;AACA;AACAN,oBAAQD,IAAR;AACD,WAJD,MAIO;AACLE,mBAAO,eAAP;AACD;AACF,SAlBQ;AAmBTO,cAAM,cAAUC,GAAV,EAAe;AACnBR,iBAAO,2BAA2BQ,GAAlC;AACD;AArBQ,OAAX;AAuBD,KAxBM,CAAP;AAyBD,GA1BD;AA2BD;;AAEM,IAAMC,oBAAMd,QAAQ,KAAR,CAAZ;AACA,IAAMe,sBAAOf,QAAQ,MAAR,CAAb;AACA,IAAMgB,oBAAMhB,QAAQ,KAAR,CAAZ;AACA,IAAMiB,0BAASjB,QAAQ,QAAR,CAAf","file":"request.js","sourcesContent":["const Promise = require('../utils/bluebird')\n\nfunction request (method = 'GET') {\n  return function (url, data = {}) {\n    return new Promise(function (resolve, reject) {\n      wx.request({\n        url,\n        data,\n        method,\n        header: {\n          'Content-Type': 'application/json'\n        },\n        success: function (res) {\n          var statusCode = res.statusCode\n          var errMsg = res.errMsg\n          var data = res.data\n          if (statusCode == 200) {\n            //todo\n            // resolve(data.response)\n            resolve(data)\n          } else {\n            reject('网路请求错误，请稍后再试~')\n          }\n        },\n        fail: function (err) {\n          reject('网路请求不符合规范，请检查域名是否符合要求~' + err)\n        }\n      })\n    })\n  }\n}\n\nexport const GET = request('GET')\nexport const POST = request('POST')\nexport const PUT = request('PUT')\nexport const DELETE = request('DELETE')\n"]}